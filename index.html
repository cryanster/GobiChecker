<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Gobi Bookmarklets</title>

  <link rel="stylesheet" href="gobi.css"> 

</head>

<body>
	<div class="wrapper">
		<br>
		<h1>Gobi bookmarklets for offsite work</h1>
		<p>These shortcuts are tailored for the reading list and collection development work we're doing over the next few weeks. Use GobiText if you need full title and publisher details (CDDLs), and use GobiCheck for just ISBN, licence and price (LAs). Note that these are coded to default to the maximum licence where available (unlimited > 3-user > 1-user) but they also include all other available licences.</p>
	<hr>
	<h2>For Chrome</h2>
	<p>To install these shortcuts in Chrome, drag the button onto the Bookmarks Bar. (If the Bookmarks Bar isn't visible, press CTRL+SHIFT+B to reveal it.)</p>
<div>
  <a href="javascript:(function(){var e,t=document.getElementById('TabFrame').contentWindow.document.getElementById('ctl00_DetailContainer').getElementsByClassName('table')[0],r=t.getElementsByTagName('th')[0];if('Alternate ebook platforms and licenses'===r.innerText){for(var l=t.getElementsByTagName('tr'),a=[],n=2;n<l.length;n++)a.push(l[n].innerText);var c='';for(n=0;n<a.length;n++)c+=a[n]+'\n';var o=(c=c.replace(/978.*?\t(?:NL|Concurrent.*)\t.*\n/g,'').replace(/Ebook Central/g,'EBC').replace(/Taylor & Francis/g,'TAYF').replace(/Project MUSE/g,'PMUSE').replace(/Bloomsbury Collections/g,'BLOOM').replace(/Alexander Street/g,'ASPS').replace(/Cambridge/g,'CUP').replace(/De Gruyter/g,'DEG').replace(/Wiley/g,'WILEY').replace(/Cairn/g,'CAIRN').replace(/Oxford University Press/g,'OXFORD').replace(/Karger/g,'KARGER').replace(/Rittenhouse/g,'RIT').replace(/Sage/g,'SAGE').replace(/World Scientific/g,'WORLDSCI').replace(/IGI/g,'IGI').replace(/Elsevier/g,'ELSEVIER').replace(/\t((?:PUR\-)?[13NU][ULAY])\t.*?(\d+\.\d{2}.*)/g,'$1\t$2').replace(/\t(\d+\.\d{2})\tEUR/g,' €$1').replace(/\t(\d+\.\d{2})\tGBP/g,' £$1').replace(/\t(\d+\.\d{2})\tUSD/g,' &&&$1').replace(/&&&/g,'$')).match(/978[\dx]+/g);for(o=(e=o).filter((t,r)=>e.indexOf(t)===r),n=0;n<o.length;n++){c=c.replace(o[n],'&& '+o[n]+': ');var g=new RegExp('\n'+o[n]+'\t','g');c=c.replace(g,' | ')}return c=c.replace(/\n&& /g,' || ').replace(/&& /g,'').replace(/\t/g,''),r.style.backgroundColor='#00b159',function(e){if(document.execCommand('Copy',!1,null)){var t=document.createElement('textarea');t.contentEditable=!0,t.setAttribute('style','font-size: 13px'),document.body.appendChild(t),t.innerHTML=e,t.unselectable='off',t.focus(),document.execCommand('SelectAll'),document.execCommand('Copy',!1,null),document.body.removeChild(t)}else window.prompt('Extracted! To copy to clipboard, press Ctrl+C, then Enter',e)}(c)}})();"><button class="text">OASIScheck-CH</button></a>
	<span class="output-title">Output: </span><span class="output">ISBN/Licence/Price</span>
  <br>	
  <a href="javascript:(function(){function e(e){var t,n,r,o,l;for(r=e.replace(/([^\W_]+[^\s-]*) */g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}),t=0,n=(o=['A','An','The','And','But','Or','For','Nor','As','At','By','For','From','In','Into','Near','Of','On','Onto','To','With']).length;t<n;t++)r=r.replace(new RegExp('\\s'+o[t]+'\\s','g'),function(e){return e.toLowerCase()});for(t=0,n=(l=['Id','Tv','Er']).length;t<n;t++)r=r.replace(new RegExp('\\b'+l[t]+'\\b','g'),l[t].toUpperCase());return r}function t(e){for(var t=e.slice(1),n=['_099966_87','_099956_156','_099974_110','_055876_58','_099987_26','_099968_78','_099959_102','_099960_104','_099967_80','_099989_20','_099994_38','_099994_12','_099974_109','_055876_59','_099967_82','_099960_103','_099959_101','_099986_28','_099974_108','_055876_1','_099967_81','_099960_99','_099959_98'],r=['JSTUU ','TAFUU ','PQEUA ','EBSUU ','CUPEA ','ELGUU ','OMOUU ','OCPUU ','UPSUU ','UPSEC ','WILUA ','WILEA ','PQE3U ','EBS3U ','UPS3U ','OCP3U ','OMO3U ','OHOEA ','PQE1U ','EBS1U ','UPS1U ','OCP1U ','OMO1U '],o='',l='',_=0;_<n.length;_++){var a=t+n[_],i=document.getElementById(a);if(i){var s=i.getElementsByTagName('span');if('Contract on file'===s[11].innerText){var c=s[7].innerText;c='$'+c.slice(0,-4),l||(l=r[_]+'\t'+c),o=o+r[_]+' '+c+' | ',a=t}else o+=' * unavailable *'}}return o+'\t'+l}!function(e){if(document.execCommand('Copy',!1,null)){var t=document.createElement('textarea');t.contentEditable=!0,t.setAttribute('style','font-size: 13px'),document.body.appendChild(t),t.innerHTML=e,t.unselectable='off',t.focus(),document.execCommand('SelectAll'),document.execCommand('Copy',!1,null),document.body.removeChild(t)}else window.prompt('Extracted! To copy to clipboard, press Ctrl+C, then Enter',e)}(function(){var n=document.getElementsByClassName('focused'),r=[['ISBN:']];for(i=0;i<n.length;i++){var o='',l=n[i].getElementsByClassName('label');for(j=0;j<r[0].length;j++)for(k=0;k<l.length;k++)if(l[k].innerText==r[0][j]){o+=e(l[k].nextSibling.innerText)+' ';break}var _=n[i].getElementsByClassName('UK-List')[0];o+=_?'\t\t£'+_.innerText.slice(0,-4):t(n[i].id),r.push(o)}return r.shift(),-1!==r[0].indexOf('$')?n[0].style.borderColor='#00b159':n[0].style.borderColor='#ffc425',r.join('\t')}())})();"><button class="text">GobiCheck-CH</button></a>
	<span class="output-title">Output: </span><span class="output">ISBN/Licence/Price</span>
  <br>
  <a href="javascript:(function(){function e(e){var t,n,r,o,l;for(r=e.replace(/([^\W_]+[^\s-]*) */g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}),t=0,n=(o=['A','An','The','And','But','Or','For','Nor','As','At','By','For','From','In','Into','Near','Of','On','Onto','To','With']).length;t<n;t++)r=r.replace(new RegExp('\\s'+o[t]+'\\s','g'),function(e){return e.toLowerCase()});for(t=0,n=(l=['Id','Tv','Er']).length;t<n;t++)r=r.replace(new RegExp('\\b'+l[t]+'\\b','g'),l[t].toUpperCase());return r}function t(e){for(var t=e.slice(1),n=['_099966_87','_099956_156','_099974_110','_055876_58','_099987_26','_099968_78','_099959_102','_099960_104','_099967_80','_099989_20','_099994_38','_099994_12','_099974_109','_055876_59','_099967_82','_099960_103','_099959_101','_099986_28','_099974_108','_055876_1','_099967_81','_099960_99','_099959_98'],r=['JSTUU ','TAFUU ','PQEUA ','EBSUU ','CUPEA ','ELGUU ','OMOUU ','OCPUU ','UPSUU ','UPSEC ','WILUA ','WILEA ','PQE3U ','EBS3U ','UPS3U ','OCP3U ','OMO3U ','OHOEA ','PQE1U ','EBS1U ','UPS1U ','OCP1U ','OMO1U '],o='',l='',i=0;i<n.length;i++){var _=t+n[i],a=document.getElementById(_);if(a){var s=a.getElementsByTagName('span');if('Contract on file'===s[11].innerText){var c=s[7].innerText;c='$'+c.slice(0,-4),l||(l=r[i]+'\t'+c),o=o+r[i]+' '+c+' | ',_=t}else o+=' * unavailable *'}}return l+'\t'+o}!function(e){if(document.execCommand('Copy',!1,null)){var t=document.createElement('textarea');t.contentEditable=!0,t.setAttribute('style','font-size: 13px'),document.body.appendChild(t),t.innerHTML=e,t.unselectable='off',t.focus(),document.execCommand('SelectAll'),document.execCommand('Copy',!1,null),document.body.removeChild(t)}else window.prompt('Extracted! To copy to clipboard, press Ctrl+C, then Enter',e)}(function(){var n=document.getElementsByClassName('focused'),r=[['Author:','Editor:','Title:','Publisher:','Pub Year:','Binding:','ISBN:']];for(i=0;i<n.length;i++){var o='',l=n[i].getElementsByClassName('label');for(j=0;j<r[0].length;j++)for(k=0;k<l.length;k++)if(l[k].innerText==r[0][j]){o+=e(l[k].nextSibling.innerText)+'\t';break}var _=n[i].getElementsByClassName('UK-List')[0];o+=_?'\t£'+_.innerText.slice(0,-4)+'\t':t(n[i].id),r.push(o)}return r.shift(),-1!==r[0].indexOf('$')?n[0].style.borderColor='#00b159':n[0].style.borderColor='#ffc425',r.join('\t')}())})();"><button class="check">GobiText-CH</button></a>
	<span class="output-title">Output: </span><span class="output">Author/Title/Publisher/Year/Format/ISBN/Licence/Price</span>
  <br>
    <a href='javascript:(function(){var bibID;var firstLink=document.getElementById("recordDisplayLink2Component");function getBibID(string){string=string.getAttribute("href");var bibID=/C__R(b[0-9]{7})/.exec(string);return bibID[1];};function getBibID2(){var link=document.getElementsByClassName("headerFields")[0].innerHTML;var bibID=/C__R(b[0-9]{7})/.exec(link);return bibID[1];};function copyToClipboard(text){var copyDiv=document.createElement("div");copyDiv.contentEditable=true;document.body.appendChild(copyDiv);copyDiv.innerHTML=text;copyDiv.unselectable="off";copyDiv.focus();document.execCommand("SelectAll");document.execCommand("Copy",false,null);document.body.removeChild(copyDiv);};if(firstLink){bibID=getBibID(firstLink);copyToClipboard(bibID);open(location,"_self").close();}else{try{bibID=getBibID2();copyToClipboard(bibID);open(location,"_self").close();}catch{bibID="order";copyToClipboard(bibID);open(location,"_self").close();}}})();'><button class="check">GetBibID-CH</button></a>
	<span class="output-title">Output: </span><span class="output">Bib ID (less check digit)</span>

</div>
<br>
<h2>For Firefox</h2>
	<p>To install in Firefox, right click on the button and select 'Bookmark this link'. Choose the Bookmarks Toolbar as the location and then save. (If the Bookmarks Toolbar isn't visible, go to View > Toolbars and select it.)</p>
<div>
  <a href="javascript:(function(){function e(e){var t,r,n,_,o;for(n=e.replace(/([^\W_]+[^\s-]*) */g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}),t=0,r=(_=['A','An','The','And','But','Or','For','Nor','As','At','By','For','From','In','Into','Near','Of','On','Onto','To','With']).length;t<r;t++)n=n.replace(new RegExp('\\s'+_[t]+'\\s','g'),function(e){return e.toLowerCase()});for(t=0,r=(o=['Id','Tv','Er']).length;t<r;t++)n=n.replace(new RegExp('\\b'+o[t]+'\\b','g'),o[t].toUpperCase());return n}function t(e){for(var t=e.slice(1),r=['_099966_87','_099956_156','_099974_110','_055876_58','_099987_26','_099968_78','_099959_102','_099960_104','_099967_80','_099989_20','_099994_38','_099994_12','_099974_109','_055876_59','_099967_82','_099960_103','_099959_101','_099986_28','_099974_108','_055876_1','_099967_81','_099960_99','_099959_98'],n=['JSTUU ','TAFUU ','PQEUA ','EBSUU ','CUPEA ','ELGUU ','OMOUU ','OCPUU ','UPSUU ','UPSEC ','WILUA ','WILEA ','PQE3U ','EBS3U ','UPS3U ','OCP3U ','OMO3U ','OHOEA ','PQE1U ','EBS1U ','UPS1U ','OCP1U ','OMO1U '],_='',o='',a=0;a<r.length;a++){var i=t+r[a],U=document.getElementById(i);if(U){var l=U.getElementsByTagName('span');if('Contract on file'===l[11].innerText){var s=l[7].innerText;s='$'+s.slice(0,-4),o||(o=n[a]+'\t'+s),_=_+n[a]+' '+s+' | ',i=t}else _+=' * unavailable *'}}return _+'\t'+o}var r;r=function(){var r=document.getElementsByClassName('focused'),n=[['ISBN:']];for(i=0;i<r.length;i++){var _='',o=r[i].getElementsByClassName('label');for(j=0;j<n[0].length;j++)for(k=0;k<o.length;k++)if(o[k].innerText==n[0][j]){_+=e(o[k].nextSibling.innerText)+' ';break}var a=r[i].getElementsByClassName('UK-List')[0];_+=a?'\t\t£'+a.innerText.slice(0,-4):t(r[i].id),n.push(_)}return n.shift(),-1!==n[0].indexOf('$')?r[0].style.borderColor='#00b159':r[0].style.borderColor='#ffc425',n.join('\t')}(),window.prompt('Extracted! To copy to clipboard, press Ctrl+C, then Enter',r)})();"><button class="text">GobiCheck-FF</button></a>
  	<span class="output-title">Output: </span><span class="output">ISBN/Licence/Price</span>
  <br>
  <a href="javascript:(function(){function e(e){var t,r,n,_,o;for(n=e.replace(/([^\W_]+[^\s-]*) */g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}),t=0,r=(_=['A','An','The','And','But','Or','For','Nor','As','At','By','For','From','In','Into','Near','Of','On','Onto','To','With']).length;t<r;t++)n=n.replace(new RegExp('\\s'+_[t]+'\\s','g'),function(e){return e.toLowerCase()});for(t=0,r=(o=['Id','Tv','Er']).length;t<r;t++)n=n.replace(new RegExp('\\b'+o[t]+'\\b','g'),o[t].toUpperCase());return n}function t(e){for(var t=e.slice(1),r=['_099966_87','_099956_156','_099974_110','_055876_58','_099987_26','_099968_78','_099959_102','_099960_104','_099967_80','_099989_20','_099994_38','_099994_12','_099974_109','_055876_59','_099967_82','_099960_103','_099959_101','_099986_28','_099974_108','_055876_1','_099967_81','_099960_99','_099959_98'],n=['JSTUU ','TAFUU ','PQEUA ','EBSUU ','CUPEA ','ELGUU ','OMOUU ','OCPUU ','UPSUU ','UPSEC ','WILUA ','WILEA ','PQE3U ','EBS3U ','UPS3U ','OCP3U ','OMO3U ','OHOEA ','PQE1U ','EBS1U ','UPS1U ','OCP1U ','OMO1U '],_='',o='',i=0;i<r.length;i++){var a=t+r[i],l=document.getElementById(a);if(l){var s=l.getElementsByTagName('span');if('Contract on file'===s[11].innerText){var U=s[7].innerText;U='$'+U.slice(0,-4),o||(o=n[i]+'\t'+U),_=_+n[i]+' '+U+' | ',a=t}else _+=' * unavailable *'}}return o+'\t'+_}var r;r=function(){var r=document.getElementsByClassName('focused'),n=[['Author:','Editor:','Title:','Publisher:','Pub Year:','Binding:','ISBN:']];for(i=0;i<r.length;i++){var _='',o=r[i].getElementsByClassName('label');for(j=0;j<n[0].length;j++)for(k=0;k<o.length;k++)if(o[k].innerText==n[0][j]){_+=e(o[k].nextSibling.innerText)+'\t';break}var a=r[i].getElementsByClassName('UK-List')[0];_+=a?'\t£'+a.innerText.slice(0,-4)+'\t':t(r[i].id),n.push(_)}return n.shift(),-1!==n[0].indexOf('$')?r[0].style.borderColor='#00b159':r[0].style.borderColor='#ffc425',n.join('\t')}(),window.prompt('Extracted! To copy to clipboard, press Ctrl+C, then Enter',r)})();"><button class="check">GobiText-FF</button></a>
	<span class="output-title">Output: </span><span class="output">Author/Title/Publisher/Year/Format/ISBN/Licence/Price</span>
	<p>(Because Firefox takes a more cautious approach to the clipboard, these shortcuts won't copy directly. Instead you'll be prompted to do this manually using CTRL+c.)</p>
</div>
</div>
</body>
</html>
